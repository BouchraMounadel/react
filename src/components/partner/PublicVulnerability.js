import React, { useState } from 'react';

import logo from '@/img/monlogo.png';

const PublicVulnerability = () => {


  const [selectedDimension, setSelectedDimension] = useState('ivtmulti');
  const [selectedCommune, setSelectedCommune] = useState('all');
  const [iframeSrc, setIframeSrc] = useState('http://localhost:8082/mapstore/#/context/ivtmulti?bbox=-9.523698113545803,31.580503771750905,-6.078024477417245,32.897270929713265');


  const handleDimensionChange = (e) => {
    setSelectedDimension(e.target.value);
  };

  const handleCommuneChange = (e) => {
    setSelectedCommune(e.target.value);
    
  };
    const getBBXForCommune = (commune) => {
      let bbx;
      switch (commune) {
        case 'benguerir':
          bbx = '-8.053407543817343,32.194190794441084,-7.807541242255269,32.28815014663786';
          break;
        case 'sidibouothmane':
          bbx = '-8.047703850440996,31.86201709836387,-7.828046061488351,31.946270694675945';
          break;
        case 'all':
          bbx = '-9.523698113545803,31.580503771750905,-6.078024477417245,32.897270929713265';
          break;
        case 'sidighanem':
          bbx = '-8.62907480821545,32.43507479077523,-7.233955341050603,32.96551333919896';
          break;
        case 'sidiabdallah':
          bbx = '-8.326328504385089,32.41111765614765,-7.271641004385089,32.81251870838695';
          break;
        case 'tlauh':
          bbx = '-7.787895406969143,31.738865268189677,-7.410574479431659,31.883739087649005';

          break;
        case 'ouladaamertizmarine':
          bbx = '-8.781914248059337,32.101504776831725,-7.949963897752043,32.419371708140325';
          break;
        case 'labrikiyine':
          bbx = '-8.43605750019978,32.140715985763144,-7.750037880529959,32.40279403068986';
          break;
        case 'sidiboubker':
          bbx = '-8.045660741918766,31.763983981744403,-7.535122433986429,31.959899505502786';
          break;
        case 'sidialilabrahla':
          bbx = '-8.397560507890546,32.0566798538561,-7.633941310607781,32.348624894804125';
          break;
        case 'ouladhassounehamri':
          bbx= '-8.176209056455264,32.17353560088864,-7.517834892413531,32.42497610156365';
          break;
        case 'nzalatlaadam':
          bbx= '-8.473423272005562,31.93867143831127,-7.648533945242747,32.25440832966967';
          break;
        case 'aithammou':
          bbx= '-8.648941942678078,32.096912361214216,-7.894852386985748,32.38509246938556';
          break;
        case 'ouladimloul':
          bbx= '-8.265173524697076,31.935682374610067,-7.50394764485813,32.227099677717995';
          break;
        case 'jaidate':
          bbx= '-8.12707882463809,31.508871281596743,-7.325873692030825,31.816989672195927';
          break;
        case 'bourrous':
          bbx= '-8.048973398572855,31.646669252415016,-7.536569317129222,31.843549545760478';
          break;
        case 'akarma':
          bbx= '-7.917107653251776,31.82262533192713,-7.430812189769427,32.00912858362796';
          break;
        case 'rasainrhamna':
          bbx= '-7.85283236313677,31.62150417081619,-7.4210307851639925,31.787487440525886';
          break;
        case 'jaafra':
          bbx= '-8.31044081035944,32.16172151707222,-7.288067875379824,32.5519282446573';
          break;
        case 'skhourrehamna':
          bbx= '-8.409754519892061,32.330744251307905,-7.676750030026994,32.610156804024925';
          break;
        case 'aittaleb':
          bbx= '-8.496817851513214,32.27796929624631,-7.9256709904279035,32.495885536714724';
          break;
        case 'lamharra':
          bbx= '-8.205910251777965,31.891669090967017,-7.329953661987729,32.227088853464245';
          break;
        case 'bouchane':
          bbx= '-8.710063336071073,32.24405927526189,-8.14273068167077,32.4606031061332';
          break;
        case 'skouralhadra':
          bbx= '-8.214972260213102,32.33342150385546,-7.433177514614187,32.63139266510325';
          break;
        case 'sidimansour':
          bbx= '-8.432772298691646,32.332563903766996,-7.797242137890549,32.57486553362183';
          break;
        case 'jbilate':
          bbx= '-8.36090183341446,31.678753309603877,-7.505119837827152,32.00722068924533';
          break;
        default:
          bbx= '-9.523698113545803,31.580503771750905,-6.078024477417245,32.897270929713265';
          break;
            
      }
      return bbx;
      
    };
    

    const handleSubmit = (e) => {
      e.preventDefault();

  // Filtrer les valeurs et construire la chaîne de requête
  let bbx = getBBXForCommune(selectedCommune);
  const newIframeSrc ='http://localhost:8082/mapstore/#/context/${selectedDimension}?bbox=${bbx}';

  setIframeSrc(newIframeSrc);
    
    };


  const retourAccueil = () => {
    // Retourne à la page précédente
    window.history.back();
  };

  const containerStyle = {
    display: 'flex', // Utilisez Flexbox pour organiser les éléments en ligne
    flexDirection: 'column', // Organisez les éléments en colonne
    height: '100vh', // Utilisez la hauteur de la vue pour garantir que la barre latérale et l'iframe occupent toute la hauteur
  };

  const headerStyle = {
    backgroundColor: '#0f2d5c', // Bleu foncé
    color: 'white',
    padding: '10px',
    display: 'flex',
    alignItems: 'center', // Centrez les éléments verticalement
    justifyContent: 'space-between', // Espacez les éléments horizontalement
  };

  const contentStyle = {
    display: 'flex', // Utilisez Flexbox pour organiser les éléments en ligne
    height: '100%', // Utilisez la hauteur de la vue pour garantir que la barre latérale et l'iframe occupent toute la hauteur
  };

  const sidebarStyle = {
    width: '200px', // Ajustez la largeur de la barre latérale selon vos besoins
    backgroundColor: '#0f2d5c', // Changez la couleur selon vos besoins
    padding: '20px',
    color: '#fff', // Changez la couleur du texte selon vos besoins
  };

  const filterBarStyle = {
    fontSize: '20px',
    marginTop: '-100px',
    fontFamily: 'Calibri, sans-serif',
    textAlign: 'center',
  };

  const iframeStyle = {
    border: 'none',
    flex: '1', // Utilisez l'espace restant pour l'iframe
  };
  const titleStyle = {
    fontSize: '28px', // Ajustez la taille du titre selon vos besoins
    margin: '0',
    color:'white',
    textAlign: 'center', // Pour centrer le texte
    flex: '1', // Pour centrer le titre au milieu
  };

  
  return (
    <div style={containerStyle}>
      {/* Header */}
      <header style={headerStyle}>
        <img src={logo} alt="Logo" style={{ width: '50px', marginRight: '10px' }} />
        <h1 style={titleStyle}>Cartes de vulnérabilité Rehamna</h1>
      </header>

      <div style={contentStyle}>

        <div className="sidebar" style={sidebarStyle}>
          <div className="filter-bar" style={filterBarStyle}>
            <form onSubmit={handleSubmit}>
            <label style={{ fontSize: '13px', marginTop: '180px' }} htmlFor="filter-select">
              Choisissez une dimension :
            </label>
            <select  style={{ fontSize: '13px' ,width: '100%'}} id="filter-select" name="filter"  onChange={handleDimensionChange} value={selectedDimension} >
              <option value="ivtdemographie">Démographie</option>
              <option value="ivtinfrastructure">Infrastructure</option>
              <option value="ivtsocioeconomie">Socio-économie</option>
              <option value="ivtenvironnement">Environnement</option>
              <option value="ivtmulti">Multidimension</option>
            </select>

            <label style={{ fontSize: '13px',width: '100%' }} htmlFor="commune-select">
              Choisissez une commune :
            </label>
            <select  style={{ fontSize: '13px',width: '100%' }} id="commune-select" name="commune"  onChange={handleCommuneChange} value={selectedCommune} >
                    <option value="all">Toute la province</option>
                    <option value="benguerir">BenGuerir</option>
                    <option value="sidibouothmane">Sidi Bou Othmane</option>
                    <option value="sidiabdallah">Sidi Abdallah</option>
                    <option value="tlauh">Tlauh</option>
                    <option value="ouladaamertizmarine">Oulad Aamer Tizmarine</option>
                    <option value="labrikiyine">Labrikiyine</option>
                    <option value="sidiboubker">Sidi Boubker</option>
                    <option value="sidialilabrahla">Sidi Ali Labrahla</option>
                    <option value="ouladhassounehamri">Oulad Hassoune Hamri</option>
                    <option value="nzalatlaadam">Nzalaat Laadam</option>
                    <option value="aithammou">Ait Hammou</option>
                    <option value="ouladimloul">Oulad Imloul</option>
                    <option value="jaidate">Jaidate</option>
                    <option value="bourrous">Bourrous</option>
                    <option value="akarma">Akarma</option>
                    <option value="rasainrhamna">Ras Ain Rhamna</option>
                    <option value="jaafra">Jaafra</option>
                    <option value="skhourrehamna">Skhour Rehamna</option>
                    <option value="aittaleb">Ait taleb</option>
                    <option value="lamharra" >Lamharra</option>
                    <option value="bouchane">Bouchane</option>
                    <option value="skouralhadra" >Skoura Lhadra</option>
                    <option value="sidimansour">Sidi Mansour</option>
                    <option value="jbilate">Jbilate</option>
                    <option value="sidighanem">Sidi Ghanem</option>
            </select>

            
            <button type="submit" style={{ backgroundColor: 'aquamarine' ,fontSize: '13px',width: '100%'}}>
              Aller vers la carte
            </button>

            <button
              type="button"
              style={{ backgroundColor: 'bisque',fontSize: '13px',width: '100%' }}
              onClick={() => (window.location.href = 'URL_DE_VOTRE_BACKEND/carte_vulnerabilite_filtre.php')}>
              Retourner à la carte initiale
            </button>

            </form>

            <a href='#' target="_blank" style={{ color: '#8cb3d9', fontSize: '14px', font: 'bold' }}>
              Consulter les interprétations & recommandations pour le territoire filtré
            </a>
          </div>
        </div>
        <iframe id="mapIframe"  allowFullScreen style={iframeStyle} src={iframeSrc}></iframe>
      </div>
    </div>
  );
};
export default PublicVulnerability;